import unittest
from code import day11

class PartOne(unittest.TestCase):
    def test_getImage(self):
        filename = 'inputs/testinput11-1.txt'
        image = day11.getImage(filename)
        self.assertEqual(len(image), 10)
        self.assertEqual(len(image[0]), 10)

    def test_expand(self):
        image = [['.', '.', '.', '#', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '#', '.', '.'],
                 ['#', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '#', '.', '.', '.'],
                 ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '#', '.', '.'],
                 ['#', '.', '.', '.', '#', '.', '.', '.', '.', '.']
                 ]
        expanded = day11.expand(image)
        self.assertEqual(expanded[3], ['.']*13)
        for line in expanded:
            self.assertEqual(line[3], '.')

    def test_getGalaxyPairs(self):
        image = [['#', '.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
                 ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['#', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.'],
                 ['.', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '.', '.']
                 ]
        galaxies, pairs = day11.getGalaxyPairs(image)
        self.assertEqual(len(galaxies), 9)
        self.assertEqual(len(pairs), 36)

    def test_getSumPaths(self):
        galaxies = [['1', [0, 0]], ['2', [5, 0]], ['3', [9, 1]],
                    ['4', [12, 4]], ['5', [1, 5]], ['6', [8, 6]],
                    ['7', [0, 9]], ['8', [9, 10]], ['9', [4, 11]]
                    ]
        pairs = [['1', '2'], ['1', '3'], ['1', '4'], ['1', '5'], ['1', '6'],
                 ['1', '7'], ['1', '8'], ['1', '9'], ['2', '3'], ['2', '4'],
                 ['2', '5'], ['2', '6'], ['2', '7'] ,['2', '8'], ['2', '9'],
                 ['3', '4'], ['3', '5'], ['3', '6'], ['3', '7'], ['3', '8'],
                 ['3', '9'], ['4', '5'], ['4', '6'] ,['4', '7'], ['4', '8'],
                 ['4', '9'], ['5', '6'] ,['5', '7'], ['5', '8'], ['5', '9'],
                 ['6', '7'], ['6', '8'], ['6', '9'], ['7', '8'], ['7', '9'],
                 ['8', '9']
                 ]
        paths_sum = day11.getSumPaths(galaxies, pairs)
        self.assertEqual(paths_sum, 374)

class PartTwo(unittest.TestCase):
    def test_expand2(self):
        galaxies = [['1', [3, 0]], ['2', [7, 1]], ['3', [0, 2]],
                    ['4', [6, 4]], ['5', [1, 5]], ['6', [9, 6]],
                    ['7', [7, 8]], ['8', [0, 9]], ['9', [4, 9]]
                    ]
        image = [['.', '.', '.', '#', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '#', '.', '.'],
                 ['#', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '#', '.', '.', '.'],
                 ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
                 ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
                 ['.', '.', '.', '.', '.', '.', '.', '#', '.', '.'],
                 ['#', '.', '.', '.', '#', '.', '.', '.', '.', '.']
                 ]
        expanded = day11.expand2(image, galaxies, 10)
        self.assertEqual(expanded[0][1], [12,0])
